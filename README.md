# OldTube universal Nixie clock.
Универсальные ламповые часы. Поддерживаются различные газоразрядные индикаторы. Работают на  AVR 8bit.

Ламповые часы на 4-8 газоразрядных индикаторах ИН-12, ИН-14, ИН-17... Есть верхние платы для других индикаторов. Часы обладают приятным оранжевым свечением, умеют показывать время и дату, температуру с датчика DS18B20 либо будильник. Часы имеют настраиваемую подсветку на адресных светодиодах WS2812E. Несколько режимов подсветки, и эффектов смены цифр. Каждая лампа установлена в панельку, и может быть заменена при необходимости. Плата поддерживает до 8 ламп и точку. В качестве прошивки используется доработанная версия https://github.com/AlexGyver/NixieClock_v2/.

| Фото | Индикаторы |
| ---- | ------ |
| ? | ИН-12 |
| ? | ИН-17 |
| ? | ИН-18 |

Общий принцип работы: Микросхема mc34063 совместно с дросселем и выпрямительным диодом преобразуют входное напряжение до высокого 180-200в. Далее оно подаётся на аноды ламп через транзисторы mmbta92 и mmbta42 и токо-ограничивающие резисторы. Для вывода определённой цифры микроконтроллер (atmega328) формирует на своих выводах код который подаётся на микросхему высоковольтного дешифратора к155ид1, он в свою очередь замыкает нужный вывод лампы на минус питания. Микроконтроллер по очереди ,через транзисторы подаёт высокое напряжение на каждую лампу с высокой частотой. При этом горит только одна из ламп, но из за высокой частоты переключения возникает эффект одновременной работы всех индикаторов, что называется динамическая индикация. 
В самых простых конструкциях можно увидеть использование оптопар, частота переключекния у них ниже и можно увидеть мерцание, при использовании транзисторов частота переключения выше и мерцание уже не будет видно.

**Проблемы:**
	Самостоятельная пайка SMD компонентов весьма сложна. С советским паяльником паять будет сложно. Лучьшим ренением для разовой сборки будет купить паяльную паску, и наносить её из шприца на контактные площядки, потом расставить пинцетом СМД компоненты и запечь на утеге либо паяльным феном. Далле запаять все выводные компоненты паяльником.
	Также есть возможность заказать пайку у https://jlcpcb.com/ выйдет около 700руб(1$-65 руб)
	Для самостоятельной сборки множества плат лучьше заказать трафарет для паяльной пасты, и наносить её шпателем.

**На плате есть возможность:**

*     Подключить датчик освещённости
*     Будильник (либо 3 или 4 пункт)
*     Использовать шим микроконтроллера для раскачки мосфета за место MC34063
*     Датчик температуры DS18b20
*     Подключить до 8 анодов и 1 вывод на неоновую точку

**Реализовано в прошивке:**

*     Плата с индикаторами ИН-12 4шт и неоновая точка
*     Датчик температуры DS18b20 при удержании кнопки
*     Вывод времени, настройка времени.
*     Эффекты смены цифр.
*     Смена режимов подсветки, отключение подсветки.

**Пока НЕ реализовано в прошивке:**

*     Будильник
*	    Датчик освещёности
*     Датчик движения

Дополнительные материалы, исходники тут https://www.dropbox.com/sh/kpqx2jsb4040rfv/AADgNEK07HeK2DekBq8I7Z2Ia?dl=0

  Управление:
  - Настройка времени:
  - ВЕРХНЯЯ (синяя термоусадка) - короткое нажатия "+".
  - СРЕДНЯЯ (красная термоусадка) - долгое нажатие настройка времени, коротное переключение между часами и минутами.
  - НИЖНЯЯ  (жолтая термоусадка) - короткое нажатиями "-". 

  - Управление эффектами В РЕЖИМЕ ЧАСОВ:
     -Клик по средней кнопке останавливает и запускает перебор цветов подсветки
    - Удержание нижней кнопки включает и выключает "глюки"
    - Клик по нижней кнопке переключает режимы подсветки ламп
      - Дыхание
      - Постоянное свечение
      - Отключена
    - Клик по верхней кнопке переключает режимы перелистывания цифр
      - Без эффекта
      - Плавное угасание
      - Перемотка по порядку числа
      - Перемотка по катодам
      - Поезд
      - Резинка
    - Удержание верхней кнопки показывает температуру

Ошибки в прошивке:
  - При отключении WS2812 перестоют переключатся эффекты переключения цифр.
  - При выключении глюков перестаёт гореть последняя лампа при 8 лампах.
  - На 4 и 5 режиме эффект не останавливается при 8 лампах
